function [X, out] = checkCorrelation(X,Y,opts)

ip
disp('-> Checking for feature correlation with performance.');
out.rho = corr(X,Y,'rows','pairwise');
[~,row] = sort(abs(out.rho),1,'descend');
out.selvars = unique(row(1:opts.threshold,:));
X = X(:,out.selvars);
disp(['-> Keeping ' num2str(size(X,2)) ' out of ' num2str(nfeats) ' features (correlation).']);

end